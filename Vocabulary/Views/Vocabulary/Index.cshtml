@model Vocabulary.Business.ViewModels.VocabularyViewModel
@using Vocabulary.Extensions

@{
    ViewBag.Title = "Словарь терминов и сокращений";
}
<div class="row">
    <div class="span6 offset3">
        <div class="well ">
            <legend>Словарь терминов и сокращений</legend>
            <div class="form-horizontal">
                <div class="control-group">

                    <label class="control-label" for="username">Username</label>
                    <div class="controls">
                        @Html.EnumDropDownListFor(model => model.Theme, new { id = "theme" })
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="controls">
                    <div class="row-fluid">
                        <div class="span12">
                            <select id="resultSearch" size="15" class="input-block-level">
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <div class="row-fluid">
                        <div class="span12">
                            <input id="search" type="text" value="" class="input-block-level" />
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>


@section scripts {
    @Scripts.Render("~/bundles/SignalR")
    <script src="~/signalr/hubs" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {
            var vocabularyHub = $.connection.vocabularyHub;

            vocabularyHub.publishWords = function (words) {
                var resultSearchInput = $('#resultSearch');
                resultSearchInput.html(resultSearchInput.html() + '<option>' + words + '</option>');
            };
            $.connection.hub.start();
            $(document).keypress(function (e) {
                if (e.which == 13) {
                    $('#resultSearch').html("");
                    vocabularyHub.searchWords($("#search").val(), $('#theme').val());
                    $("#search").val("");
                }
            });

            vocabularyHub.publishMessage = function (nick, msg) {
                var chatWin = $("#chatWindow");
                chatWin.html(chatWin.html() + "<b>" + nick + "</b>: " + msg + "<br />");
            };

        });
    </script>

}
